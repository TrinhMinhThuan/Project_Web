<div class="container">
  <form id="searchForm" action="/admin/book/edit/{{productId}}" enctype="multipart/form-data" method="Post" class="d-flex  flex-column">
    <div>
      <div class="mb-3 d-flex justify-content-center col-8 align-items-center">
        <img id = "imagePreview" height="190px" width="190px" src="/Images/{{_product.Image}}" alt="Image Preview">
      </div>
      <div class="mb-3 row align-items-center">
        <form id="uploadForm" >
          <input type="file" id="imageInput" name="image" value="{{_product.Image}}" accept="image/*">
        </form>
      </div>
      <div class="mb-3 row align-items-center">
        <label class="form-label col-2 m-0">Mã sách: </label>
        <input type="text" class="form-control col-6" placeholder="Nhập id sách" name="newProductID"
          value="{{_product.ProductID}}" required />
      </div>
      <div class="mb-3 row align-items-center">
        <label class="form-label col-2 m-0">Tên: </label>
        <input type="text" class="form-control col-6" placeholder="Nhập tên sách" name="productName"
          value="{{_product.ProductName}}" required />
      </div>
      <div class="mb-3 row align-items-center">
        <label class="form-label col-2 m-0">Thể loại: </label>
        <select name="categoryId" class="col-6 form-select option">
          {{#each _genre}}
          <option value="{{this.CategoryID}}">{{this.CategoryName}}</option>
          {{/each}}
        </select>
      </div>
      <div class="mb-3 row align-items-center">
        <label class="form-label col-2 m-0">Lượng tồn: </label>
        <input type="number" class="form-control col-6" placeholder="Nhập số sản phẩm" name="stockquantity"
          value="{{_product.StockQuantity}}" required />
      </div>
      <div class="mb-3 row align-items-center">
        <label class="form-label col-2 m-0">Tác giả: </label>
        <input type="text" class="form-control col-6" placeholder="Nhập tên tác giả" name="author"
          value="{{_product.Author}}" required />
      </div>
      <div class="mb-3 row align-items-center">
        <label class="form-label col-2 m-0">Năm xuất bản: </label>
        <input type="number" class="form-control col-6" placeholder="Nhập năm xuất bản" name="publishedyear"
          value="{{_product.PublishedYear}}" required />
      </div>
      <div class="mb-3 row align-items-center">
        <label class="form-label col-2 m-0">Giá sản phẩm: </label>
        <input type="number" class="form-control col-6" placeholder="Nhập giá sản phẩm" name="price"
          value="{{_product.Price}}" required />
      </div>
      <div class = "d-flex justify-content-center">
        <button type="submit" class="d-block btn btn-success">Lưu thay đổi</button>
      </div>
    </div>
  </form>
</div>
<script>

// Thêm sự kiện lắng nghe cho sự kiện change trên input file
document.getElementById('imageInput').addEventListener('change', function () {
 var input = document.getElementById('imageInput');
  var preview = document.getElementById('imagePreview');
  if (input.files && input.files[0]) {
    var reader = new FileReader();
    reader.onload = function (e) {
      preview.src = e.target.result;
    };
    reader.readAsDataURL(input.files[0]);
  }
});
</script>