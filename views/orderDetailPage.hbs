{{#if orderDetail.length}}
<h3 class="h5 w-100 fw-bold mb-0 text-gray-800 text-center mt-5 mb-5">T·ªïng h√≥a ƒë∆°n: {{TotalPriceAllItem}} VNƒê
</h3>
<div>
    <table class="table">
        <thead>
            <tr class="text-center">
                <th scope="col">S√°ch</th>
                <th scope="col">T√°c gi·∫£</th>
                <th scope="col">Gi√°/ S·∫£n ph·∫©m</th>
                <th scope="col">S·ªë l∆∞·ª£ng</th>
                <th scope="col">ƒê∆°n gi√°</th>

            </tr>
        </thead>
        <tbody id="listBook">
            {{#each orderDetail}}
            <tr class="text-center">
                <th scope="row">{{this.ProductName}}</th>
                <td>{{this.Author}}</td>
                <td>{{this.PriceOne}} VNƒê</td>
                <td>{{this.Quantity}}</td>
                <td>{{this.TotalAmout}} VNƒê</td>

            </tr>
            {{/each}}


        </tbody>
    </table>
</div>
<div class="d-flex justify-content-center mt-4 mb-4">
    {{#if pages}}
    <button class="btn-prevStart btn btn-light mr-2"><i class="fa fa-angle-double-left"></i></button>
    <button class="btn-prev btn btn-light mr-2"><i class="fas fa-chevron-left"></i></button>
    <select id="pageSelect" class="col-2 align-self-center text-center paging form-select ">
        {{#each pages}}
        <option value="{{this}}">Page {{this}}</option>
        {{/each}}
    </select>
    <button class="btn-next btn btn-light ml-2"><i class="fas fa-chevron-right"></i></button>
    <button class="btn-nextEnd btn btn-light ml-2"><i class="fa fa-angle-double-right"></i></button>
    {{/if}}
</div>
{{else}}
<p class="text-center">B·∫°n ch∆∞a c√≥ s·∫£n ph·∫©m n√†o trong gi·ªè h√†ngü•≤</p>
{{/if}}

<div class="w-100 row ">
    <a href="/profile" class="btn btn-success" style="margin: auto; width:10%;"> <i class="fa-solid fa-arrow-left"></i>
        Quay l·∫°i
    </a>
</div>

<script>
// Update Page
var currentPage;
// H√†m ƒë·ªÉ c·∫≠p nh·∫≠t currentPage khi c√≥ s·ª± ki·ªán thay ƒë·ªïi
function updateCurrentPage() {
    currentPage = document.getElementById("pageSelect").value;
}

const selection = document.querySelector(".paging");
selection?.addEventListener("change", (e) => {
  const url = new URL(window.location.href);
  const query = new URLSearchParams(window.location.search);
  query.set("page", e.target.value);
  url.search = query;
  location.assign(url.href);
});
const query = new URLSearchParams(window.location.search);
if (selection) selection.value = query.get("page") || 1;


document.querySelectorAll('.btn-prevStart').forEach(button => {
  button.addEventListener('click', function(e) {
    event.preventDefault();
    updateCurrentPage();
    if(currentPage == 1){
      return;
    }
    const url = new URL(window.location.href);
    const query = new URLSearchParams(window.location.search);
    query.set("page", 1);
    url.search = query;
    location.assign(url.href);
  })
});

document.querySelectorAll('.btn-prev').forEach(button => {
  button.addEventListener('click', function(e) {
    event.preventDefault();
    updateCurrentPage();
    //const max = {{pages.length}};
    if(currentPage == 1){
      return;
    }
    const url = new URL(window.location.href);
    const query = new URLSearchParams(window.location.search);
    query.set("page", currentPage - 1);
    url.search = query;
    location.assign(url.href);
  })
});

document.querySelectorAll('.btn-nextEnd').forEach(button => {
  button.addEventListener('click', function(e) {
    event.preventDefault();
    updateCurrentPage();
    const max = {{pages.length}};
    if(currentPage == max){
      return;
    }
    const url = new URL(window.location.href);
    const query = new URLSearchParams(window.location.search);
    query.set("page", max);
    url.search = query;
    location.assign(url.href);
  })
});

document.querySelectorAll('.btn-next').forEach(button => {
  button.addEventListener('click', function(e) {
    event.preventDefault();
    updateCurrentPage();
    const max = {{pages.length}};
    if(currentPage == max){
      return;
    }
    const url = new URL(window.location.href);
    const query = new URLSearchParams(window.location.search);
    query.set("page", parseInt(currentPage,10) + 1);
    url.search = query;
    location.assign(url.href);
  })
});
</script>